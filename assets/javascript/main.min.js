var CT = {} || CT;

CT.MAIN = (function() {
  return {
    init: function() {
      // Jingle
      function addOpacity(parent, son) {
        $(parent)
          .find(son)
          .removeClass("o-0");
      }

      // var timeoutTwo = window.setTimeout(function() {
      //   addOpacity(".js-jingle-one", "li:nth-of-type(1)");
      // }, 700);
      // var timeoutTwo = window.setTimeout(function() {
      //   addOpacity(".js-jingle-one", "li:nth-of-type(2)");
      // }, 1400);
      // var timeoutTwo = window.setTimeout(function() {
      //   addOpacity(".js-jingle-one", "li:nth-of-type(3)");
      // }, 2100);

      setTimeout(function() {
        $(".js-one")
          .removeClass("h-0")
          .addClass("h-120");
        $("html, body").animate(
          {
            scrollTop: 36
          },
          600
        );
      }, 2500);

      setTimeout(function() {
        $(".js-two").fadeIn(500);
        $(".js-one")
          .removeClass("h-120")
          .addClass("h-156");
      }, 3500);

      setTimeout(function() {
        $(".js-three").fadeIn(500);
        $(".js-one")
          .removeClass("h-156")
          .addClass("h-192");
      }, 5500);

      setTimeout(function() {
        $(".js-four").fadeIn(500);
        $(".js-one")
          .removeClass("h-192")
          .addClass("h-228");
        $(".js-jingle-one").addClass("o-0");
      }, 7500);

      setTimeout(function() {
        $(".js-jingle-one").addClass("dn");
        $(".js-jingle-two")
          .addClass("jingle")
          .fadeIn(500);
        $(".js-one")
          .removeClass("h-228")
          .addClass("h-364");
      }, 9500);

      setTimeout(function() {
        $(".js-five").fadeIn(500);
        $(".js-one")
          .removeClass("h-364")
          .addClass("h-400");
        $("html, body").animate(
          {
            scrollTop: 72
          },
          600
        );
      }, 11500);

      setTimeout(function() {
        $(".js-six").fadeIn(500);
        $(".js-one")
          .removeClass("h-400")
          .addClass("h-436");
        $("html, body").animate(
          {
            scrollTop: 108
          },
          600
        );
      }, 13500);

      setTimeout(function() {
        $(".js-seven").fadeIn(500);
        $(".js-one").removeClass("h-436");
        $("html, body").animate(
          {
            scrollTop: 144
          },
          600
        );
      }, 15500);

      setTimeout(function() {
        $(".js-eight").fadeIn(500);
        $("html, body").animate(
          {
            scrollTop: 182
          },
          600
        );
      }, 17500);

      // Card
      $(".js-card").on("click", function(e) {
        var left = e.originalEvent.clientX;
        var top = e.originalEvent.clientY;
        var content = $(this)
          .siblings(".card-back")
          .find(".js-content");
        $(".js-modal").css({ top: top, left: left });
        var elem = $(this);

        $(this)
          .parent()
          .addClass("active");

        setTimeout(function() {
          $(elem)
            .parent()
            .addClass("opened");
          $(".js-modal").addClass("active");
          $(".js-container").html(content);
          $(".js-modal-container").removeClass("o-0");
        }, 1000);
      });

      $(".js-close").on("click", function() {
        $(".card.active")
          .removeClass("active")
          .removeClass("opened");
        $(".js-modal").removeClass("active");
        $(".js-modal-container").addClass("o-0");
        $(".js-container").html("");
      });
    }
  };
})();

function ready(fn) {
  if (document.readyState === "complete") {
    CT.MAIN.init();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
}

ready(CT.MAIN.init);
